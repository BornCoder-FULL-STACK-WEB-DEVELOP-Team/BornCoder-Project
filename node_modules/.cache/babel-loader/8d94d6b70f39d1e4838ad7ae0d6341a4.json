{"ast":null,"code":"var _jsxFileName = \"D:\\\\fullstack\\\\bookingapp\\\\my-app\\\\src\\\\Components\\\\Background.js\";\nimport React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport Avatar from '@material-ui/core/Avatar';\nimport { deepOrange, blueGrey } from '@material-ui/core/colors';\nimport { background_container, avatar, updatebutton } from '../Styles/Background.module.scss';\nimport IconButton from '@material-ui/core/IconButton';\nimport CreateOutlinedIcon from '@material-ui/icons/CreateOutlined';\nimport { storage } from \"./firebase/firebase\";\n\nconst useStyles = theme => ({\n  default: {\n    fontSize: theme.spacing(7),\n    color: theme.palette.getContrastText(deepOrange[500]),\n    backgroundColor: deepOrange[500],\n    width: theme.spacing(10),\n    height: theme.spacing(10)\n  },\n  button: {\n    backgroundColor: blueGrey[300]\n  }\n});\n\nclass Background extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onFileChange = event => {\n      if (event.target.files[0]) {\n        const image = event.target.files[0];\n        this.setState({\n          image: image,\n          path: URL.createObjectURL(event.target.files[0])\n        });\n      }\n    };\n\n    this.uploadFile = event => {\n      event.preventDefault();\n      console.log(this.state);\n      const {\n        image\n      } = this.state; //const uploadTask = storage.ref(`images/${image.name}`).put(image);\n      //uploadTask.on('state_changed', progress, error,complete)\n\n      if (image === null) {\n        console.error(`not an image, should be ${typeof image}`);\n      }\n\n      const uploadTask = storage.ref(`/images/${image.name}`).put(image);\n      uploadTask.on(\"state_changed\", snapShot => {//takes a snap shot of the process as it is happening\n        //console.log(snapShot);\n      }, err => {\n        //catches the errors\n        console.log(err);\n      }, () => {\n        // gets the functions from storage refences the image storage in firebase by the children\n        // gets the download url then sets the image from firebase as the value for the imgUrl key:\n        storage.ref(\"images\").child(image.name).getDownloadURL().then(url => {\n          console.log(url);\n          this.setState({\n            url\n          });\n        });\n      });\n    };\n\n    this.state = {\n      image: null,\n      path: null,\n      url: \"\",\n      users: []\n    };\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  handleClick() {\n    fetch('http://localhost:8090/users/1').then(res => res.json()).then(data => {\n      console.log(data);\n      this.setState({\n        users: data\n      });\n    }).catch(e => console.log('错误:', e));\n  }\n\n  render() {\n    const {\n      classes\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: background_container,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"button\",\n      value: \"\\u70B9\\u51FB http-get \\u65B9\\u5F0F\\u83B7\\u53D6\\u6570\\u636E\",\n      onClickCapture: this.handleClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 7\n      }\n    }, this.state.users && this.state.users.map((item, index) => /*#__PURE__*/React.createElement(\"li\", {\n      key: index.toString(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }\n    }, item.userName)))), /*#__PURE__*/React.createElement(\"input\", {\n      onChange: this.onFileChange,\n      type: \"file\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(Avatar, {\n      alt: \"defaut\",\n      src: this.state.url,\n      className: classes.default + \" \" + avatar,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 7\n      }\n    }, \"q\"), /*#__PURE__*/React.createElement(IconButton, {\n      onClick: this.uploadFile,\n      className: classes.button + \" \" + updatebutton,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(CreateOutlinedIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }\n    })));\n  }\n\n}\n\nexport default withStyles(useStyles)(Background);","map":{"version":3,"sources":["D:/fullstack/bookingapp/my-app/src/Components/Background.js"],"names":["React","withStyles","Avatar","deepOrange","blueGrey","background_container","avatar","updatebutton","IconButton","CreateOutlinedIcon","storage","useStyles","theme","default","fontSize","spacing","color","palette","getContrastText","backgroundColor","width","height","button","Background","Component","constructor","props","onFileChange","event","target","files","image","setState","path","URL","createObjectURL","uploadFile","preventDefault","console","log","state","error","uploadTask","ref","name","put","on","snapShot","err","child","getDownloadURL","then","url","users","handleClick","bind","fetch","res","json","data","catch","e","render","classes","map","item","index","toString","userName"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport { deepOrange,blueGrey} from '@material-ui/core/colors';\r\nimport {background_container,avatar,updatebutton} from '../Styles/Background.module.scss';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CreateOutlinedIcon from '@material-ui/icons/CreateOutlined';\r\nimport { storage } from \"./firebase/firebase\";\r\n\r\nconst useStyles = theme => ({\r\n    default: {\r\n      fontSize:theme.spacing(7),\r\n      color: theme.palette.getContrastText(deepOrange[500]),\r\n      backgroundColor: deepOrange[500],\r\n      width: theme.spacing(10),\r\n      height: theme.spacing(10),\r\n    },\r\n    button:{\r\n      backgroundColor:blueGrey[300],\r\n    },\r\n  });\r\n\r\n\r\nclass Background extends React.Component{\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      image: null,\r\n      path: null,\r\n      url: \"\",\r\n      users: [],\r\n    };\r\n    this.handleClick = this.handleClick.bind(this);\r\n  }\r\n\r\n  handleClick() {\r\n    fetch(\r\n      'http://localhost:8090/users/1'\r\n    )\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        console.log(data)\r\n        this.setState({users: data})\r\n      })\r\n      .catch(e => console.log('错误:', e))\r\n  }\r\n\r\n\r\n  onFileChange = (event) => {\r\n    if (event.target.files[0]) {\r\n      const image = event.target.files[0];\r\n      this.setState({\r\n        image: image,\r\n        path: URL.createObjectURL(event.target.files[0]),\r\n      });\r\n    }\r\n  };\r\n\r\n  uploadFile = (event) => {\r\n    event.preventDefault();\r\n    console.log(this.state);\r\n    const { image } = this.state;\r\n    //const uploadTask = storage.ref(`images/${image.name}`).put(image);\r\n    //uploadTask.on('state_changed', progress, error,complete)\r\n    if (image === null) {\r\n      console.error(`not an image, should be ${typeof image}`);\r\n    }\r\n\r\n    const uploadTask = storage.ref(`/images/${image.name}`).put(image);\r\n\r\n    uploadTask.on(\r\n      \"state_changed\",\r\n      (snapShot) => {\r\n        //takes a snap shot of the process as it is happening\r\n        //console.log(snapShot);\r\n      },\r\n      (err) => {\r\n        //catches the errors\r\n        console.log(err);\r\n      },\r\n      () => {\r\n        // gets the functions from storage refences the image storage in firebase by the children\r\n        // gets the download url then sets the image from firebase as the value for the imgUrl key:\r\n        storage\r\n          .ref(\"images\")\r\n          .child(image.name)\r\n          .getDownloadURL()\r\n          .then((url) => {\r\n            console.log(url);\r\n            this.setState({ url });\r\n          });\r\n      }\r\n    );\r\n  };\r\n\r\n  render(){\r\n    const { classes } = this.props;\r\n  return (\r\n    <div className={background_container}>\r\n      <div>\r\n      <input type=\"button\" value=\"点击 http-get 方式获取数据\" onClickCapture={this.handleClick} />\r\n      <ul>\r\n        {this.state.users &&\r\n          this.state.users.map((item, index) => (\r\n            <li key={index.toString()}>{item.userName}</li>\r\n          ))}\r\n      </ul>\r\n      </div>\r\n      <input onChange={this.onFileChange} type=\"file\"></input>\r\n      <Avatar alt=\"defaut\" src={this.state.url} className={classes.default+\" \"+avatar}>\r\n        q\r\n      </Avatar>\r\n      <IconButton onClick={this.uploadFile} className={classes.button+\" \"+updatebutton}>\r\n        <CreateOutlinedIcon />\r\n      </IconButton>\r\n    </div>  \r\n  );\r\n  }\r\n}\r\n\r\nexport default withStyles(useStyles)(Background);"]},"metadata":{},"sourceType":"module"}